<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediVault - Secure Medical Records System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Initializing secure connection...</p>
        </div>
    </div>

    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status hidden"></div>

    <!-- Signup Section -->
    <div id="signupSection" class="auth-section">
        <div class="auth-card">
            <div class="auth-header">
                <div class="logo-container">
                    <div class="logo-icon">H</div>
                    <h1 class="logo-text">MediVault</h1>
                </div>
                <h2>Create Hospital Account</h2>
                <p>Join our secure medical records network</p>
            </div>

            <!-- Step 1: Hospital Verification -->
            <div id="verificationStep">
                <div class="form-group">
                    <label for="hospitalId">Hospital ID</label>
                    <input
                        type="text"
                        id="hospitalId"
                        name="hospitalId"
                        placeholder="Enter your Hospital ID"
                        required
                    />
                    <small>e.g., APOLLO-CHE-001</small>
                </div>

                <div class="form-group">
                    <label for="licenseNumber">License Number</label>
                    <input
                        type="text"
                        id="licenseNumber"
                        name="licenseNumber"
                        placeholder="Enter your license number"
                        required
                    />
                    <small>e.g., TN/MED/2023/045</small>
                </div>

                <button type="button" id="verifyBtn" class="btn btn-primary">
                    Verify Hospital
                </button>
            </div>

            <!-- Step 2: Registration Form (Hidden initially) -->
            <div id="registrationStep" class="hidden">
                <form id="signupForm">
                    <div class="form-group">
                        <label for="hospitalName">Hospital Name</label>
                        <input
                            type="text"
                            id="hospitalName"
                            name="hospitalName"
                            placeholder="Hospital name"
                            readonly
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label for="adminEmail">Admin Email</label>
                        <input
                            type="email"
                            id="adminEmail"
                            name="adminEmail"
                            placeholder="admin@hospital.com"
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label for="contactPhone">Contact Phone</label>
                        <input
                            type="tel"
                            id="contactPhone"
                            name="contactPhone"
                            placeholder="+91XXXXXXXXXX"
                            pattern="^\+91[0-9]{10}$"
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="password-input-group">
                            <input
                                type="password"
                                id="password"
                                name="password"
                                placeholder="Create password"
                                required
                            />
                            <button type="button" id="togglePassword" class="toggle-password">
                                üëÅÔ∏è
                            </button>
                        </div>
                        <div id="passwordStrength" class="password-strength"></div>
                        <small>Min 8 characters, uppercase, lowercase, number & special character</small>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input
                            type="password"
                            id="confirmPassword"
                            name="confirmPassword"
                            placeholder="Confirm password"
                            required
                        />
                        <div id="passwordMatch" class="password-match"></div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        Complete Registration
                    </button>
                </form>
            </div>

            <div class="auth-footer">
                <p>
                    Already have an account?
                    <a href="#" onclick="window.showLogin(); return false;">Sign in here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Login Section -->
    <div id="loginSection" class="auth-section hidden">
        <div class="auth-card">
            <div class="auth-header">
                <div class="logo-container">
                    <div class="logo-icon">H</div>
                    <h1 class="logo-text">MediVault</h1>
                </div>
                <h2>Hospital Login</h2>
                <p>Sign in to your hospital dashboard</p>
            </div>

            <form id="loginForm">
                <div class="form-group">
                    <label for="loginHospitalId">Hospital ID</label>
                    <input
                        type="text"
                        id="loginHospitalId"
                        name="loginHospitalId"
                        placeholder="Enter your Hospital ID"
                        required
                    />
                </div>

                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <div class="password-input-group">
                        <input
                            type="password"
                            id="loginPassword"
                            name="loginPassword"
                            placeholder="Enter your password"
                            required
                        />
                        <button type="button" id="toggleLoginPassword" class="toggle-password">
                            üëÅÔ∏è
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="rememberMe" name="rememberMe">
                        <span>Remember me</span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary">
                    Sign In
                </button>

                <div class="form-links">
                    <a href="#" id="forgotPassword">Forgot password?</a>
                </div>
            </form>

            <div class="auth-footer">
                <p>
                    New to MediVault?
                    <a href="#" onclick="window.showSignup(); return false;">Create an account</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboardSection" class="dashboard-section hidden">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="dashboard-header-left">
                <div class="logo-container">
                    <div class="logo-icon">H</div>
                    <h1 class="logo-text">MediVault</h1>
                </div>
            </div>
            <div class="dashboard-header-right">
                <div class="hospital-info">
                    <h3 id="dashboardHospitalName">Hospital Name</h3>
                    <p id="dashboardHospitalId">ID: HOSP-001</p>
                </div>
                <button id="logoutBtn" class="btn btn-secondary">
                    Logout
                </button>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div class="dashboard-container">
            <!-- Sidebar Menu -->
            <aside class="dashboard-sidebar">
                <nav class="dashboard-menu">
                    <div class="menu-item active" onclick="window.switchDashboardView('dashboard')">
                        <span class="menu-icon">üìä</span>
                        <span class="menu-text">Dashboard</span>
                    </div>
                    <div class="menu-item" onclick="window.switchDashboardView('records')">
                        <span class="menu-icon">üìã</span>
                        <span class="menu-text">Medical Records</span>
                    </div>
                    <div class="menu-item" onclick="window.switchDashboardView('patients')">
                        <span class="menu-icon">üë•</span>
                        <span class="menu-text">Patients</span>
                    </div>
                    <div class="menu-item" onclick="window.switchDashboardView('analytics')">
                        <span class="menu-icon">üìà</span>
                        <span class="menu-text">Analytics</span>
                    </div>
                    <div class="menu-item" onclick="window.switchDashboardView('settings')">
                        <span class="menu-icon">‚öôÔ∏è</span>
                        <span class="menu-text">Settings</span>
                    </div>
                </nav>
            </aside>

            <!-- Main Content Area -->
            <main class="dashboard-main">
                <!-- Dashboard View -->
                <div id="dashboardView" class="dashboard-view">
                    <h2>Dashboard Overview</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìã</div>
                            <div class="stat-content">
                                <h3>Total Records</h3>
                                <p class="stat-number" id="totalRecordsCount">0</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìÖ</div>
                            <div class="stat-content">
                                <h3>Today's Records</h3>
                                <p class="stat-number" id="todayRecordsCount">0</p>
                            </div>
                        </div>
                    </div>

                    <!-- Add Medical Record Form -->
                    <div class="add-record-section">
                        <h3>Add New Medical Record</h3>

                        <!-- Patient Verification -->
                        <div class="patient-verification">
                            <h4>Verify Patient</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="patientId">Patient ID</label>
                                    <input
                                        type="text"
                                        id="patientId"
                                        placeholder="Enter Patient ID"
                                        required
                                    />
                                </div>
                                <div class="form-group">
                                    <label for="patientPhone">Phone Number</label>
                                    <input
                                        type="tel"
                                        id="patientPhone"
                                        placeholder="+91XXXXXXXXXX"
                                        required
                                    />
                                </div>
                                <div class="form-group">
                                    <label for="patientName">Patient Name</label>
                                    <input
                                        type="text"
                                        id="patientName"
                                        placeholder="Enter patient name"
                                        required
                                    />
                                </div>
                            </div>
                            <button type="button" id="verifyPatientBtn" class="btn btn-primary">
                                Verify Patient
                            </button>
                            <div id="verificationStatus" class="verification-status"></div>
                            <div id="patientInfo" class="patient-info hidden"></div>
                        </div>

                        <!-- Medical Record Form (Hidden until patient verified) -->
                        <div id="recordFormSection" class="hidden">
                            <form id="addRecordForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="recordType">Record Type</label>
                                        <select id="recordType" required>
                                            <option value="OPD Consultation">OPD Consultation</option>
                                            <option value="Prescription">Prescription</option>
                                            <option value="Diagnostic Report - Pathology">Diagnostic Report - Pathology</option>
                                            <option value="Diagnostic Report - Radiology">Diagnostic Report - Radiology</option>
                                            <option value="Discharge Summary">Discharge Summary</option>
                                            <option value="Surgery Record">Surgery Record</option>
                                            <option value="Immunization Record">Immunization Record</option>
                                            <option value="Emergency Record">Emergency Record</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="visitType">Visit Type</label>
                                        <select id="visitType" required>
                                            <option value="OPD">OPD</option>
                                            <option value="IPD">IPD</option>
                                            <option value="Emergency">Emergency</option>
                                            <option value="Follow-up">Follow-up</option>
                                            <option value="Telemedicine">Telemedicine</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="doctorName">Doctor Name</label>
                                        <input
                                            type="text"
                                            id="doctorName"
                                            placeholder="Dr. Name"
                                            required
                                        />
                                    </div>
                                    <div class="form-group">
                                        <label for="doctorRegNumber">Registration Number</label>
                                        <input
                                            type="text"
                                            id="doctorRegNumber"
                                            placeholder="MCI Registration Number"
                                        />
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="doctorQualification">Qualification</label>
                                        <input
                                            type="text"
                                            id="doctorQualification"
                                            placeholder="e.g., MBBS, MD (General Medicine)"
                                        />
                                    </div>
                                    <div class="form-group">
                                        <label for="doctorSpecialization">Specialization</label>
                                        <select id="doctorSpecialization">
                                            <option value="">Select Specialization</option>
                                            <option value="General Medicine">General Medicine</option>
                                            <option value="Paediatrics">Paediatrics</option>
                                            <option value="Cardiology">Cardiology</option>
                                            <option value="Neurology">Neurology</option>
                                            <option value="Orthopaedics">Orthopaedics</option>
                                            <option value="General Surgery">General Surgery</option>
                                            <option value="Gynaecology">Gynaecology</option>
                                            <option value="Dermatology">Dermatology</option>
                                            <option value="ENT">ENT</option>
                                            <option value="Ophthalmology">Ophthalmology</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="chiefComplaint">Chief Complaint</label>
                                    <textarea
                                        id="chiefComplaint"
                                        rows="2"
                                        placeholder="Patient's main complaint"
                                    ></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="diagnosis">Diagnosis</label>
                                    <textarea
                                        id="diagnosis"
                                        rows="3"
                                        placeholder="Enter diagnosis"
                                        required
                                    ></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="treatment">Treatment Plan</label>
                                    <textarea
                                        id="treatment"
                                        rows="3"
                                        placeholder="Enter treatment details"
                                    ></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="medications">Medications</label>
                                    <textarea
                                        id="medications"
                                        rows="3"
                                        placeholder="Enter prescribed medications"
                                    ></textarea>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="severity">Severity</label>
                                        <select id="severity">
                                            <option value="Low">Low</option>
                                            <option value="Medium" selected>Medium</option>
                                            <option value="High">High</option>
                                            <option value="Critical">Critical</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="followUpDate">Follow-up Date</label>
                                        <input
                                            type="date"
                                            id="followUpDate"
                                        />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="followUpInstructions">Follow-up Instructions</label>
                                    <textarea
                                        id="followUpInstructions"
                                        rows="2"
                                        placeholder="Follow-up instructions for patient"
                                    ></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="notes">Additional Notes</label>
                                    <textarea
                                        id="notes"
                                        rows="2"
                                        placeholder="Any additional notes"
                                    ></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="attachments">Attachments</label>
                                    <input
                                        type="file"
                                        id="attachments"
                                        multiple
                                        accept=".pdf,.jpg,.jpeg,.png"
                                    />
                                    <div id="fileList" class="file-list"></div>
                                </div>

                                <button type="submit" class="btn btn-primary">
                                    Add Medical Record
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Records View -->
                <div id="recordsView" class="dashboard-view hidden">
                    <h2>Medical Records</h2>
                    <div id="recordsList" class="records-list">
                        <div class="empty-state">
                            <p>Medical records will appear here once created</p>
                        </div>
                    </div>
                </div>

                <!-- Patients View -->
                <div id="patientsView" class="dashboard-view hidden">
                    <h2>Patients</h2>
                    <div id="patientsList" class="patients-list">
                        <div class="empty-state">
                            <p>This feature is coming soon</p>
                        </div>
                    </div>
                </div>

                <!-- Analytics View -->
                <div id="analyticsView" class="dashboard-view hidden">
                    <h2>Analytics</h2>
                    <div class="empty-state">
                        <p>This feature is coming soon</p>
                    </div>
                </div>

                <!-- Settings View -->
                <div id="settingsView" class="dashboard-view hidden">
                    <h2>Settings</h2>
                    <div class="empty-state">
                        <p>This feature is coming soon</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Supabase JS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Your App JS -->
    <script src="app.js"></script>
</body>
</html>
